<!DOCTYPE html>
<html lang="en">
<head>
    <title>Element Details</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { background-color: #000; color: #fff; font-family: Helvetica, sans-serif; }
        #container { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="container"></div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.169.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        const urlParams = new URLSearchParams(window.location.search);
        const symbol = urlParams.get('id');

        const response = await fetch('https://raw.githubusercontent.com/Bowserinator/Periodic-Table-JSON/master/periodic-table-lookup.json');
        const json = await response.json();

        let el;
        for (let key in json) {
            if (json[key].symbol === symbol) {
                el = json[key];
                break;
            }
        }

        if (!el) {
            document.body.innerHTML = '<p>Element not found.</p>';
        } else {
            // Display details (you can add more HTML here)
            document.title = el.name;
            const info = document.createElement('div');
            info.style.position = 'absolute';
            info.style.top = '10px';
            info.style.left = '10px';
            info.innerHTML = `
                <h1>${el.name} (${el.symbol})</h1>
                <p>Atomic Number: ${el.number}</p>
                <p>Atomic Mass: ${el.atomic_mass}</p>
                <p>Phase: ${el.phase}</p>
                <p>Discovered by: ${el.discovered_by}</p>
                <p>Summary: ${el.summary}</p>
            `;
            document.body.appendChild(info);

            // Load 3D model
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);

            const loader = new GLTFLoader();
            loader.load(el.bohr_model_3d, (gltf) => {
                scene.add(gltf.scene);
            }, undefined, (error) => {
                console.error(error);
            });

            const light = new THREE.AmbientLight(0xffffff);
            scene.add(light);

            camera.position.z = 5;

            const controls = new OrbitControls(camera, renderer.domElement);

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
        }
    </script>
</body>
</html>
