<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Element Explorer</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/babel-standalone@7.22.9/babel.min.js"></script>
    <script type="module" src="https://unpkg.com/@google/model-viewer@3.5.0/dist/model-viewer.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans overflow-x-hidden">
    <div class="fixed inset-0 z-[-1] bg-gradient-radial from-[#0a0e2a] to-black"></div>
    <div class="absolute inset-0 z-[-1] bg-[radial-gradient(2px_2px_at_20px_30px,#eee,transparent),radial-gradient(2px_2px_at_40px_70px,#fff,transparent),radial-gradient(1px_1px_at_90px_40px,#ddd,transparent),radial-gradient(1px_1px_at_130px_80px,#fff,transparent),radial-gradient(2px_2px_at_160px_30px,#ddd,transparent)] bg-[length:200px_100px] bg-repeat animate-twinkle"></div>
    
    <div id="root" class="container mx-auto px-4 py-8 max-w-6xl relative z-10"></div>

    <script type="text/babel">
        const ElementViewer = () => {
            const [element, setElement] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(null);
            const [rotationPaused, setRotationPaused] = React.useState(false);
            const [symbolVisible, setSymbolVisible] = React.useState(true);
            const modelViewerRef = React.useRef(null);

            React.useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const symbol = params.get('id')?.toLowerCase();

                if (!symbol) {
                    setError('No element specified.');
                    setLoading(false);
                    return;
                }

                fetch('https://raw.githubusercontent.com/Bowserinator/Periodic-Table-JSON/master/periodic-table-lookup.json')
                    .then(res => res.json())
                    .then(data => {
                        const order = data.order;
                        const foundElement = order
                            .map(key => data[key])
                            .find(el => el?.symbol.toLowerCase() === symbol);

                        if (!foundElement) {
                            setError('Element not found.');
                        } else {
                            setElement(foundElement);
                        }
                        setLoading(false);
                    })
                    .catch(err => {
                        console.error('Error fetching JSON:', err);
                        setError('Error loading element data.');
                        setLoading(false);
                    });
            }, []);

            const resetView = () => {
                if (modelViewerRef.current) {
                    modelViewerRef.current.cameraOrbit = '0deg 75deg 105%';
                    modelViewerRef.current.fieldOfView = '30deg';
                }
            };

            const toggleRotation = () => {
                setRotationPaused(!rotationPaused);
            };

            const toggleSymbol = () => {
                setSymbolVisible(!symbolVisible);
            };

            if (loading) {
                return (
                    <div className="text-center py-12 text-cyan-400 text-xl">
                        Loading element data...
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="text-center py-12 text-red-500 text-xl">
                        {error}
                    </div>
                );
            }

            return (
                <div>
                    <header className="text-center mb-8">
                        <h1 className="text-4xl md:text-5xl font-bold text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.7)] tracking-wide">
                            {element.name} ({element.symbol})
                        </h1>
                    </header>

                    <section className="flex flex-col items-center mb-10">
                        <div className="w-full h-[300px] sm:h-[400px] md:h-[500px] rounded-xl overflow-hidden shadow-[0_0_30px_rgba(34,211,238,0.3)] relative">
                            {element.bohr_model_3d ? (
                                <model-viewer
                                    ref={modelViewerRef}
                                    class="w-full h-full"
                                    src={element.bohr_model_3d}
                                    alt={`3D model of ${element.name}`}
                                    camera-controls
                                    auto-rotate={!rotationPaused}
                                    ar
                                    shadow-intensity="1"
                                    environment-image="neutral"
                                    exposure="1.0"
                                    camera-orbit="0deg 75deg 105%"
                                    field-of-view="30deg"
                                ></model-viewer>
                            ) : null}
                            <div className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-6xl md:text-8xl font-bold text-white/80 drop-shadow-[0_0_20px_rgba(34,211,238,0.7)] transition-opacity duration-300 ${symbolVisible ? 'opacity-70' : 'opacity-0'}`}>
                                {element.symbol}
                            </div>
                        </div>
                        <div className="flex gap-4 mt-4 flex-wrap justify-center">
                            <button
                                onClick={resetView}
                                className="bg-[rgba(30,30,60,0.7)] border border-cyan-400 text-white px-4 py-2 rounded-full hover:bg-[rgba(34,211,238,0.3)] hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all text-sm"
                            >
                                Reset View
                            </button>
                            <button
                                onClick={toggleRotation}
                                className="bg-[rgba(30,30,60,0.7)] border border-cyan-400 text-white px-4 py-2 rounded-full hover:bg-[rgba(34,211,238,0.3)] hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all text-sm"
                            >
                                {rotationPaused ? 'Resume Rotation' : 'Pause Rotation'}
                            </button>
                            <button
                                onClick={toggleSymbol}
                                className="bg-[rgba(30,30,60,0.7)] border border-cyan-400 text-white px-4 py-2 rounded-full hover:bg-[rgba(34,211,238,0.3)] hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all text-sm"
                            >
                                {symbolVisible ? 'Hide Symbol' : 'Show Symbol'}
                            </button>
                        </div>
                    </section>

                    <section className="bg-[rgba(20,20,40,0.7)] rounded-xl p-6 mb-6 border border-cyan-400/30 shadow-[0_0_15px_rgba(0,0,0,0.5)] backdrop-blur-sm">
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Atomic Number</div>
                                <div className="text-lg">{element.number}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Atomic Mass</div>
                                <div className="text-lg">{element.atomic_mass}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Category</div>
                                <div className="text-lg">{element.category}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Phase</div>
                                <div className="text-lg">{element.phase}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Discovered By</div>
                                <div className="text-lg">{element.discovered_by || 'N/A'}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Melting Point</div>
                                <div className="text-lg">{element.melt ? `${element.melt} K` : 'N/A'}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Boiling Point</div>
                                <div className="text-lg">{element.boil ? `${element.boil} K` : 'N/A'}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Density</div>
                                <div className="text-lg">{element.density ? (element.phase === 'Gas' ? `${element.density} g/L` : `${element.density} g/cmÂ³`) : 'N/A'}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Electron Configuration</div>
                                <div className="text-lg">{element.electron_configuration}</div>
                            </div>
                            <div>
                                <div className="text-cyan-400 font-semibold text-sm">Electronegativity (Pauling)</div>
                                <div className="text-lg">{element.electronegativity_pauling || 'N/A'}</div>
                            </div>
                        </div>
                        <div className="mt-6">
                            <div className="text-cyan-400 font-semibold text-sm">Summary</div>
                            <div className="text-lg">{element.summary}</div>
                        </div>
                    </section>

                    {element.image?.url && (
                        <section className="bg-[rgba(20,20,40,0.7)] rounded-xl p-6 mb-6 border border-cyan-400/30 shadow-[0_0_15px_rgba(0,0,0,0.5)] backdrop-blur-sm">
                            <div className="text-cyan-400 font-semibold text-sm">Image</div>
                            <img src={element.image.url} alt={element.image.title} className="w-full rounded-lg shadow-[0_0_15px_rgba(0,0,0,0.5)]" />
                            <div className="text-gray-400 text-xs mt-2">{element.image.attribution}</div>
                        </section>
                    )}

                    {element.spectral_img && (
                        <section className="bg-[rgba(20,20,40,0.7)] rounded-xl p-6 mb-6 border border-cyan-400/30 shadow-[0_0_15px_rgba(0,0,0,0.5)] backdrop-blur-sm">
                            <div className="text-cyan-400 font-semibold text-sm">Spectral Image</div>
                            <img src={element.spectral_img} alt={`Spectral image of ${element.name}`} className="w-full rounded-lg shadow-[0_0_15px_rgba(0,0,0,0.5)]" />
                        </section>
                    )}

                    <section className="bg-[rgba(20,20,40,0.7)] rounded-xl p-6 border border-cyan-400/30 shadow-[0_0_15px_rgba(0,0,0,0.5)] backdrop-blur-sm">
                        <p>
                            <a
                                href={element.source}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-cyan-400 hover:underline hover:drop-shadow-[0_0_5px_rgba(34,211,238,0.7)] transition-all"
                            >
                                More information on Wikipedia
                            </a>
                        </p>
                    </section>
                </div>
            );
        };

        const style = document.createElement('style');
        style.textContent = `
            @keyframes twinkle {
                0% { opacity: 0.7; }
                100% { opacity: 1; }
            }
            .animate-twinkle {
                animation: twinkle 5s infinite alternate;
            }
            model-viewer {
                width: 100%;
                height: 100%;
                --poster-color: transparent;
            }
        `;
        document.head.appendChild(style);

        ReactDOM.render(<ElementViewer />, document.getElementById('root'));
    </script>
</body>
</html>
